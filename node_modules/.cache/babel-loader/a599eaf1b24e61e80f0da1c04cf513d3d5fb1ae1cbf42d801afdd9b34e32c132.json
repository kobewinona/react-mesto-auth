{"ast":null,"code":"import _slicedToArray from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormWithValidation(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFormValid=_useState2[0],setIsFormValid=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),inputsValidity=_useState4[0],setInputsValidity=_useState4[1];function handleSubmit(event){event.preventDefault();if(event.target.checkValidity()){props.onSubmit();}setIsFormValid(false);}//\nfunction handleChange(event){var inputs=Array.from(event.currentTarget.elements);var currentInputsValidity=inputs.reduce(function(validity,input){validity[input.name]=input.validity.valid;return validity;},{});setInputsValidity(currentInputsValidity);}function validateForm(){var inputValues=Object.values(inputsValidity);if(inputValues.length===0){setIsFormValid(false);return;}setIsFormValid(inputValues.every(function(i){return i===true;}));}useEffect(function(){validateForm();},[inputsValidity,props.isOpen]);useEffect(function(){setInputsValidity({});},[props.isOpen]);return/*#__PURE__*/_jsx(\"section\",{className:\"popup popup_base_light \".concat(props.isOpen&&'popup_opened'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__container popup__container_type_form \".concat(props.isOpen?'grow':'shrink'),children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close-button\",type:\"button\",\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C.\",onClick:props.onClose}),/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:props.title}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",name:props.name,onChange:handleChange,onSubmit:handleSubmit,noValidate:true,children:[props.children,/*#__PURE__*/_jsx(\"button\",{className:\"form__submit \".concat(!isFormValid&&'form__submit_disabled'),\"aria-label\":props.ariaLabel,type:\"submit\",name:\"submit\",disabled:!isFormValid,children:props.submitText||'Сохранить'})]})]})});}export default FormWithValidation;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","FormWithValidation","props","_useState","_useState2","_slicedToArray","isFormValid","setIsFormValid","_useState3","_useState4","inputsValidity","setInputsValidity","handleSubmit","event","preventDefault","target","checkValidity","onSubmit","handleChange","inputs","Array","from","currentTarget","elements","currentInputsValidity","reduce","validity","input","name","valid","validateForm","inputValues","Object","values","length","every","i","isOpen","className","concat","children","type","onClick","onClose","title","onChange","noValidate","ariaLabel","disabled","submitText"],"sources":["/Users/dmitriklimkin/dev/mesto-react/src/components/FormWithValidation.jsx"],"sourcesContent":["import {useState, useEffect} from 'react';\n\n\nfunction FormWithValidation(props) {\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [inputsValidity, setInputsValidity] = useState({});\n  \n  function handleSubmit(event) {\n    event.preventDefault();\n    \n    if (event.target.checkValidity()) {\n      props.onSubmit();\n    }\n    \n    setIsFormValid(false);\n  }\n  //\n  function handleChange(event) {\n    const inputs = Array.from(event.currentTarget.elements);\n    \n    const currentInputsValidity = inputs.reduce((validity, input) => {\n      validity[input.name] = input.validity.valid;\n      return validity;\n    }, {});\n    \n    setInputsValidity(currentInputsValidity);\n  }\n  \n  function validateForm() {\n    const inputValues = Object.values(inputsValidity);\n\n    if (inputValues.length === 0) {\n      setIsFormValid(false);\n      return;\n    }\n\n    setIsFormValid(inputValues.every((i) => i === true));\n  }\n\n  useEffect(() => {\n    validateForm();\n  }, [inputsValidity, props.isOpen])\n  \n  useEffect(() => {\n    setInputsValidity({});\n  }, [props.isOpen])\n  \n  return (\n    <section className={`popup popup_base_light ${props.isOpen && 'popup_opened'}`}>\n      <div className={`popup__container popup__container_type_form ${props.isOpen ? 'grow' : 'shrink'}`}>\n        <button\n          className=\"popup__close-button\"\n          type=\"button\"\n          aria-label=\"Закрыть.\"\n          onClick={props.onClose}\n        />\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form className=\"form\" name={props.name} onChange={handleChange} onSubmit={handleSubmit} noValidate>\n          {props.children}\n          <button\n            className={`form__submit ${!isFormValid && 'form__submit_disabled'}`}\n            aria-label={props.ariaLabel}\n            type=\"submit\"\n            name=\"submit\"\n            disabled={!isFormValid}\n          >{props.submitText || 'Сохранить'}</button>\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default FormWithValidation;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}