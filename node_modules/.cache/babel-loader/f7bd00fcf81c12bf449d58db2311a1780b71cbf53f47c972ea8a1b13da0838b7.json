{"ast":null,"code":"import _objectSpread from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"name\",\"onUpdate\",\"isShown\"];import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InputWithValidation(_ref){var name=_ref.name,onUpdate=_ref.onUpdate,isShown=_ref.isShown,props=_objectWithoutProperties(_ref,_excluded);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isInputValid=_useState4[0],setIsInputValid=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];useEffect(function(){setInputValue(props.defaultValue);setIsInputValid(true);setErrorMessage('');},[isShown]);function handleInputsChange(event){setInputValue(event.target.value);setIsInputValid(event.target.validity.valid);setErrorMessage(event.target.validationMessage);onUpdate(name,event.target.value);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},props),{},{className:\"form__input \".concat(!isInputValid&&'form__input_error'),onChange:handleInputsChange,value:inputValue||'',name:name})),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error\",children:!isInputValid&&errorMessage})]});}export default InputWithValidation;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","InputWithValidation","_ref","name","onUpdate","isShown","props","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","inputValue","setInputValue","_useState3","_useState4","isInputValid","setIsInputValid","_useState5","_useState6","errorMessage","setErrorMessage","defaultValue","handleInputsChange","event","target","value","validity","valid","validationMessage","children","_objectSpread","className","concat","onChange"],"sources":["/Users/dmitriklimkin/dev/mesto-react/src/components/InputWithValidation.jsx"],"sourcesContent":["import {useState, useEffect} from 'react';\n\nfunction InputWithValidation({name, onUpdate, isShown, ...props}) {\n  const [inputValue, setInputValue] = useState('');\n  const [isInputValid, setIsInputValid] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  \n  useEffect(() => {\n    setInputValue(props.defaultValue);\n    setIsInputValid(true);\n    setErrorMessage('');\n  }, [isShown]);\n  \n  function handleInputsChange(event) {\n    setInputValue(event.target.value);\n    setIsInputValid(event.target.validity.valid);\n    setErrorMessage(event.target.validationMessage);\n    \n    onUpdate(name, event.target.value);\n  }\n  \n  return (\n    <>\n      <input\n        {...props}\n        className={`form__input ${!isInputValid && 'form__input_error'}`}\n        onChange={handleInputsChange}\n        value={inputValue || ''}\n        name={name}\n      />\n      <span className=\"form__input-error\">{!isInputValid && errorMessage}</span>\n    </>\n  );\n}\n\nexport default InputWithValidation;"],"mappings":"6aAAA,OAAQA,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,QAAS,CAAAC,mBAAmBA,CAAAC,IAAA,CAAsC,IAApC,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,OAAO,CAAAH,IAAA,CAAPG,OAAO,CAAKC,KAAK,CAAAC,wBAAA,CAAAL,IAAA,CAAAM,SAAA,EAC7D,IAAAC,SAAA,CAAoChB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,UAAA,CAAwCrB,QAAQ,CAAC,IAAI,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAAwCzB,QAAQ,CAAC,EAAE,CAAC,CAAA0B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpCzB,SAAS,CAAC,UAAM,CACdmB,aAAa,CAACP,KAAK,CAACgB,YAAY,CAAC,CACjCL,eAAe,CAAC,IAAI,CAAC,CACrBI,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,CAAE,CAAChB,OAAO,CAAC,CAAC,CAEb,QAAS,CAAAkB,kBAAkBA,CAACC,KAAK,CAAE,CACjCX,aAAa,CAACW,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACjCT,eAAe,CAACO,KAAK,CAACC,MAAM,CAACE,QAAQ,CAACC,KAAK,CAAC,CAC5CP,eAAe,CAACG,KAAK,CAACC,MAAM,CAACI,iBAAiB,CAAC,CAE/CzB,QAAQ,CAACD,IAAI,CAAEqB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACpC,CAEA,mBACE1B,KAAA,CAAAF,SAAA,EAAAgC,QAAA,eACElC,IAAA,SAAAmC,aAAA,CAAAA,aAAA,IACMzB,KAAK,MACT0B,SAAS,gBAAAC,MAAA,CAAiB,CAACjB,YAAY,EAAI,mBAAmB,CAAG,CACjEkB,QAAQ,CAAEX,kBAAmB,CAC7BG,KAAK,CAAEd,UAAU,EAAI,EAAG,CACxBT,IAAI,CAAEA,IAAK,EACZ,CAAC,cACFP,IAAA,SAAMoC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAE,CAACd,YAAY,EAAII,YAAY,CAAO,CAAC,EAC1E,CAAC,CAEP,CAEA,cAAe,CAAAnB,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}