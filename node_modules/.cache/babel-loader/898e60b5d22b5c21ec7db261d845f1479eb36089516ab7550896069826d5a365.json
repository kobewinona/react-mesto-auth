{"ast":null,"code":"import _defineProperty from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormWithValidation(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFormValid=_useState2[0],setIsFormValid=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),inputsValidity=_useState4[0],setInputsValidity=_useState4[1];console.log('inputsValidity',inputsValidity);console.log('isFormValid',isFormValid);function handleSubmit(event){event.preventDefault();if(event.target.checkValidity()){props.onSubmit();}setIsFormValid(false);}function handleChange(event){setInputsValidity(function(prevValues){return _objectSpread(_objectSpread({},prevValues),{},_defineProperty({},event.target.name,event.target.validity.valid));});}function validateForm(){setIsFormValid(Object.values(inputsValidity).every(function(i){return i===true;}));}useEffect(function(){validateForm();},[inputsValidity]);return/*#__PURE__*/_jsx(\"section\",{className:\"popup popup_base_light \".concat(props.isOpen&&'popup_opened'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__container popup__container_type_form \".concat(props.isOpen?'grow':'shrink'),children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close-button\",type:\"button\",\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C.\",onClick:props.onClose}),/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:props.title}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onChange:handleChange,onSubmit:handleSubmit,noValidate:true,children:[props.children,/*#__PURE__*/_jsx(\"button\",{className:\"form__submit \".concat(!isFormValid&&'form__submit_disabled'),\"aria-label\":props.ariaLabel,type:\"submit\",name:\"submit\",disabled:!isFormValid,children:props.submitText||'Сохранить'})]})]})});}export default FormWithValidation;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","FormWithValidation","props","_useState","_useState2","_slicedToArray","isFormValid","setIsFormValid","_useState3","_useState4","inputsValidity","setInputsValidity","console","log","handleSubmit","event","preventDefault","target","checkValidity","onSubmit","handleChange","prevValues","_objectSpread","_defineProperty","name","validity","valid","validateForm","Object","values","every","i","className","concat","isOpen","children","type","onClick","onClose","title","onChange","noValidate","ariaLabel","disabled","submitText"],"sources":["/Users/dmitriklimkin/dev/mesto-react/src/components/FormWithValidation.jsx"],"sourcesContent":["import {useState, useEffect} from 'react';\n\n\nfunction FormWithValidation(props) {\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [inputsValidity, setInputsValidity] = useState({});\n  \n  console.log('inputsValidity', inputsValidity);\n  console.log('isFormValid', isFormValid);\n  \n  function handleSubmit(event) {\n    event.preventDefault();\n    \n    if (event.target.checkValidity()) {\n      props.onSubmit();\n    }\n    \n    setIsFormValid(false);\n  }\n  \n  function handleChange(event) {\n    setInputsValidity((prevValues) => ({\n      ...prevValues, [event.target.name]: event.target.validity.valid\n    }));\n  }\n  \n  function validateForm() {\n    setIsFormValid(Object.values(inputsValidity).every(i => i === true));\n  }\n  \n  useEffect(() => {\n    validateForm();\n  }, [inputsValidity])\n  \n  return (\n    <section className={`popup popup_base_light ${props.isOpen && 'popup_opened'}`}>\n      <div className={`popup__container popup__container_type_form ${props.isOpen ? 'grow' : 'shrink'}`}>\n        <button\n          className=\"popup__close-button\"\n          type=\"button\"\n          aria-label=\"Закрыть.\"\n          onClick={props.onClose}\n        />\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form className=\"form\" onChange={handleChange} onSubmit={handleSubmit} noValidate>\n          {props.children}\n          <button\n            className={`form__submit ${!isFormValid && 'form__submit_disabled'}`}\n            aria-label={props.ariaLabel}\n            type=\"submit\"\n            name=\"submit\"\n            disabled={!isFormValid}\n          >{props.submitText || 'Сохранить'}</button>\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default FormWithValidation;"],"mappings":"+WAAA,OAAQA,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG1C,QAAS,CAAAC,kBAAkBA,CAACC,KAAK,CAAE,CACjC,IAAAC,SAAA,CAAsCR,QAAQ,CAAC,KAAK,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA9CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAA4Cb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IAExCG,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEH,cAAc,CAAC,CAC7CE,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEP,WAAW,CAAC,CAEvC,QAAS,CAAAQ,YAAYA,CAACC,KAAK,CAAE,CAC3BA,KAAK,CAACC,cAAc,CAAC,CAAC,CAEtB,GAAID,KAAK,CAACE,MAAM,CAACC,aAAa,CAAC,CAAC,CAAE,CAChChB,KAAK,CAACiB,QAAQ,CAAC,CAAC,CAClB,CAEAZ,cAAc,CAAC,KAAK,CAAC,CACvB,CAEA,QAAS,CAAAa,YAAYA,CAACL,KAAK,CAAE,CAC3BJ,iBAAiB,CAAC,SAACU,UAAU,SAAAC,aAAA,CAAAA,aAAA,IACxBD,UAAU,KAAAE,eAAA,IAAGR,KAAK,CAACE,MAAM,CAACO,IAAI,CAAGT,KAAK,CAACE,MAAM,CAACQ,QAAQ,CAACC,KAAK,IAC/D,CAAC,CACL,CAEA,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtBpB,cAAc,CAACqB,MAAM,CAACC,MAAM,CAACnB,cAAc,CAAC,CAACoB,KAAK,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,GAAK,IAAI,GAAC,CAAC,CACtE,CAEAnC,SAAS,CAAC,UAAM,CACd+B,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACjB,cAAc,CAAC,CAAC,CAEpB,mBACEZ,IAAA,YAASkC,SAAS,2BAAAC,MAAA,CAA4B/B,KAAK,CAACgC,MAAM,EAAI,cAAc,CAAG,CAAAC,QAAA,cAC7EnC,KAAA,QAAKgC,SAAS,gDAAAC,MAAA,CAAiD/B,KAAK,CAACgC,MAAM,CAAG,MAAM,CAAG,QAAQ,CAAG,CAAAC,QAAA,eAChGrC,IAAA,WACEkC,SAAS,CAAC,qBAAqB,CAC/BI,IAAI,CAAC,QAAQ,CACb,aAAW,6CAAU,CACrBC,OAAO,CAAEnC,KAAK,CAACoC,OAAQ,CACxB,CAAC,cACFxC,IAAA,OAAIkC,SAAS,CAAC,cAAc,CAAAG,QAAA,CAAEjC,KAAK,CAACqC,KAAK,CAAK,CAAC,cAC/CvC,KAAA,SAAMgC,SAAS,CAAC,MAAM,CAACQ,QAAQ,CAAEpB,YAAa,CAACD,QAAQ,CAAEL,YAAa,CAAC2B,UAAU,MAAAN,QAAA,EAC9EjC,KAAK,CAACiC,QAAQ,cACfrC,IAAA,WACEkC,SAAS,iBAAAC,MAAA,CAAkB,CAAC3B,WAAW,EAAI,uBAAuB,CAAG,CACrE,aAAYJ,KAAK,CAACwC,SAAU,CAC5BN,IAAI,CAAC,QAAQ,CACbZ,IAAI,CAAC,QAAQ,CACbmB,QAAQ,CAAE,CAACrC,WAAY,CAAA6B,QAAA,CACvBjC,KAAK,CAAC0C,UAAU,EAAI,WAAW,CAAS,CAAC,EACvC,CAAC,EACJ,CAAC,CACC,CAAC,CAEd,CAEA,cAAe,CAAA3C,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}