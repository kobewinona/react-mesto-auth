{"ast":null,"code":"import _objectSpread from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"name\",\"onUpdate\",\"isShown\"];import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InputWithValidation=/*#__PURE__*/React.forwardRef(function(_ref,ref){var name=_ref.name,onUpdate=_ref.onUpdate,isShown=_ref.isShown,props=_objectWithoutProperties(_ref,_excluded);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isInputValid=_useState4[0],setIsInputValid=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];useEffect(function(){setInputValue(props.defaultValue);setIsInputValid(true);setErrorMessage('');},[props.defaultValue,isShown]);function handleInputsChange(event){setInputValue(event.target.value);setIsInputValid(event.target.validity.valid);setErrorMessage(event.target.validationMessage);onUpdate(name,event.target.value);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({ref:ref,className:\"form__input \".concat(!isInputValid&&'form__input_error'),name:name,onChange:handleInputsChange,value:inputValue||''},props)),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error\",children:!isInputValid&&errorMessage})]});});export default InputWithValidation;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","InputWithValidation","forwardRef","_ref","ref","name","onUpdate","isShown","props","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","inputValue","setInputValue","_useState3","_useState4","isInputValid","setIsInputValid","_useState5","_useState6","errorMessage","setErrorMessage","defaultValue","handleInputsChange","event","target","value","validity","valid","validationMessage","children","_objectSpread","className","concat","onChange"],"sources":["/Users/dmitriklimkin/dev/mesto-react/src/components/InputWithValidation.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\n\n\nconst InputWithValidation = React.forwardRef(({name, onUpdate, isShown, ...props}, ref) => {\n  const [inputValue, setInputValue] = useState('');\n  const [isInputValid, setIsInputValid] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  \n  useEffect(() => {\n    setInputValue(props.defaultValue);\n    setIsInputValid(true);\n    setErrorMessage('');\n  }, [props.defaultValue, isShown]);\n  \n  function handleInputsChange(event) {\n    setInputValue(event.target.value);\n    setIsInputValid(event.target.validity.valid);\n    setErrorMessage(event.target.validationMessage);\n    \n    onUpdate(name, event.target.value);\n  }\n  \n  return (\n    <>\n      <input\n        ref={ref}\n        className={`form__input ${!isInputValid && 'form__input_error'}`}\n        name={name}\n        onChange={handleInputsChange}\n        value={inputValue || ''}\n        {...props}\n      />\n      <span className=\"form__input-error\">{!isInputValid && errorMessage}</span>\n    </>\n  );\n})\n\nexport default InputWithValidation;"],"mappings":"6aAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGjD,GAAM,CAAAC,mBAAmB,cAAGT,KAAK,CAACU,UAAU,CAAC,SAAAC,IAAA,CAAsCC,GAAG,CAAK,IAA5C,CAAAC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAAEC,OAAO,CAAAJ,IAAA,CAAPI,OAAO,CAAKC,KAAK,CAAAC,wBAAA,CAAAN,IAAA,CAAAO,SAAA,EAC9E,IAAAC,SAAA,CAAoClB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,UAAA,CAAwCvB,QAAQ,CAAC,IAAI,CAAC,CAAAwB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAAwC3B,QAAQ,CAAC,EAAE,CAAC,CAAA4B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC3B,SAAS,CAAC,UAAM,CACdqB,aAAa,CAACP,KAAK,CAACgB,YAAY,CAAC,CACjCL,eAAe,CAAC,IAAI,CAAC,CACrBI,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,CAAE,CAACf,KAAK,CAACgB,YAAY,CAAEjB,OAAO,CAAC,CAAC,CAEjC,QAAS,CAAAkB,kBAAkBA,CAACC,KAAK,CAAE,CACjCX,aAAa,CAACW,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACjCT,eAAe,CAACO,KAAK,CAACC,MAAM,CAACE,QAAQ,CAACC,KAAK,CAAC,CAC5CP,eAAe,CAACG,KAAK,CAACC,MAAM,CAACI,iBAAiB,CAAC,CAE/CzB,QAAQ,CAACD,IAAI,CAAEqB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACpC,CAEA,mBACE5B,KAAA,CAAAF,SAAA,EAAAkC,QAAA,eACEpC,IAAA,SAAAqC,aAAA,EACE7B,GAAG,CAAEA,GAAI,CACT8B,SAAS,gBAAAC,MAAA,CAAiB,CAACjB,YAAY,EAAI,mBAAmB,CAAG,CACjEb,IAAI,CAAEA,IAAK,CACX+B,QAAQ,CAAEX,kBAAmB,CAC7BG,KAAK,CAAEd,UAAU,EAAI,EAAG,EACpBN,KAAK,CACV,CAAC,cACFZ,IAAA,SAAMsC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAE,CAACd,YAAY,EAAII,YAAY,CAAO,CAAC,EAC1E,CAAC,CAEP,CAAC,CAAC,CAEF,cAAe,CAAArB,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}