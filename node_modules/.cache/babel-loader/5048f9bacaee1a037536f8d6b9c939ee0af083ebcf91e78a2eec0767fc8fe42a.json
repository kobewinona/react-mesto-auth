{"ast":null,"code":"import _slicedToArray from\"/Users/dmitriklimkin/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Card(_ref){var card=_ref.card,onCardClick=_ref.onCardClick,onCardLikeClick=_ref.onCardLikeClick,onCardDeleteClick=_ref.onCardDeleteClick;var currentUser=useContext(CurrentUserContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPlaceLoaded=_useState2[0],setIsPlaceLoaded=_useState2[1];var isOwner=currentUser._id===card.owner._id;var isLiked=card.likes.some(function(like){return like._id===currentUser._id;});function handlePlaceLoad(){setIsPlaceLoaded(true);}return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"figure\",{className:\"places__place grow\",children:[isOwner&&/*#__PURE__*/_jsx(\"button\",{className:\"places__trash-button\",type:\"button\",\"aria-label\":\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C.\",onClick:onCardDeleteClick}),/*#__PURE__*/_jsx(\"div\",{className:\"places__place-substrate\",children:/*#__PURE__*/_jsx(\"img\",{className:\"places__place-photo \".concat(isPlaceLoaded&&'places__place-photo_displayed'),src:card.link,alt:card.name,onClick:onCardClick,onLoad:handlePlaceLoad})}),/*#__PURE__*/_jsxs(\"figcaption\",{className:\"places__place-caption\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"places__place-name\",children:card.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"places__like-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"places__like-button \".concat(isLiked&&'places__like-button_active'),type:\"button\",\"aria-label\":\"\\u041D\\u0440\\u0430\\u0432\\u0438\\u0442\\u0441\\u044F.\",onClick:onCardLikeClick}),/*#__PURE__*/_jsx(\"p\",{className:\"places__like-count\",children:card.likes.length})]})]})]})});}export default Card;","map":{"version":3,"names":["useState","useContext","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","Card","_ref","card","onCardClick","onCardLikeClick","onCardDeleteClick","currentUser","_useState","_useState2","_slicedToArray","isPlaceLoaded","setIsPlaceLoaded","isOwner","_id","owner","isLiked","likes","some","like","handlePlaceLoad","children","className","type","onClick","concat","src","link","alt","name","onLoad","length"],"sources":["/Users/dmitriklimkin/dev/mesto-react/src/components/Card.jsx"],"sourcesContent":["import {useState, useContext} from 'react';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card({card, onCardClick, onCardLikeClick, onCardDeleteClick}) {\n  const currentUser = useContext(CurrentUserContext);\n  \n  const [isPlaceLoaded, setIsPlaceLoaded] = useState(false);\n  \n  const isOwner = currentUser._id === card.owner._id;\n  const isLiked = card.likes.some(like => like._id === currentUser._id);\n  \n  function handlePlaceLoad() {\n    setIsPlaceLoaded(true);\n  }\n  \n  return (\n    <li>\n      <figure className=\"places__place grow\">\n        {isOwner && <button\n          className=\"places__trash-button\"\n          type=\"button\"\n          aria-label=\"Удалить.\"\n          onClick={onCardDeleteClick}\n        />}\n        <div className=\"places__place-substrate\">\n          <img\n            className={`places__place-photo ${isPlaceLoaded && 'places__place-photo_displayed'}`}\n            src={card.link}\n            alt={card.name}\n            onClick={onCardClick}\n            onLoad={handlePlaceLoad}\n          />\n        </div>\n        <figcaption className=\"places__place-caption\">\n          <p className=\"places__place-name\">{card.name}</p>\n          <div className=\"places__like-container\">\n            <button className={`places__like-button ${isLiked && 'places__like-button_active'}`}\n                    type=\"button\" aria-label=\"Нравится.\" onClick={onCardLikeClick}/>\n            <p className=\"places__like-count\">{card.likes.length}</p>\n          </div>\n        </figcaption>\n      </figure>\n    </li>\n  );\n}\n\nexport default Card;"],"mappings":"0HAAA,OAAQA,QAAQ,CAAEC,UAAU,KAAO,OAAO,CAE1C,OAAQC,kBAAkB,KAAO,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElE,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAA0D,IAAxD,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,WAAW,CAAAF,IAAA,CAAXE,WAAW,CAAEC,eAAe,CAAAH,IAAA,CAAfG,eAAe,CAAEC,iBAAiB,CAAAJ,IAAA,CAAjBI,iBAAiB,CAClE,GAAM,CAAAC,WAAW,CAAGZ,UAAU,CAACC,kBAAkB,CAAC,CAElD,IAAAY,SAAA,CAA0Cd,QAAQ,CAAC,KAAK,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAlDG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IAEtC,GAAM,CAAAI,OAAO,CAAGN,WAAW,CAACO,GAAG,GAAKX,IAAI,CAACY,KAAK,CAACD,GAAG,CAClD,GAAM,CAAAE,OAAO,CAAGb,IAAI,CAACc,KAAK,CAACC,IAAI,CAAC,SAAAC,IAAI,QAAI,CAAAA,IAAI,CAACL,GAAG,GAAKP,WAAW,CAACO,GAAG,GAAC,CAErE,QAAS,CAAAM,eAAeA,CAAA,CAAG,CACzBR,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAEA,mBACEd,IAAA,OAAAuB,QAAA,cACErB,KAAA,WAAQsB,SAAS,CAAC,oBAAoB,CAAAD,QAAA,EACnCR,OAAO,eAAIf,IAAA,WACVwB,SAAS,CAAC,sBAAsB,CAChCC,IAAI,CAAC,QAAQ,CACb,aAAW,6CAAU,CACrBC,OAAO,CAAElB,iBAAkB,CAC5B,CAAC,cACFR,IAAA,QAAKwB,SAAS,CAAC,yBAAyB,CAAAD,QAAA,cACtCvB,IAAA,QACEwB,SAAS,wBAAAG,MAAA,CAAyBd,aAAa,EAAI,+BAA+B,CAAG,CACrFe,GAAG,CAAEvB,IAAI,CAACwB,IAAK,CACfC,GAAG,CAAEzB,IAAI,CAAC0B,IAAK,CACfL,OAAO,CAAEpB,WAAY,CACrB0B,MAAM,CAAEV,eAAgB,CACzB,CAAC,CACC,CAAC,cACNpB,KAAA,eAAYsB,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eAC3CvB,IAAA,MAAGwB,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAElB,IAAI,CAAC0B,IAAI,CAAI,CAAC,cACjD7B,KAAA,QAAKsB,SAAS,CAAC,wBAAwB,CAAAD,QAAA,eACrCvB,IAAA,WAAQwB,SAAS,wBAAAG,MAAA,CAAyBT,OAAO,EAAI,4BAA4B,CAAG,CAC5EO,IAAI,CAAC,QAAQ,CAAC,aAAW,mDAAW,CAACC,OAAO,CAAEnB,eAAgB,CAAC,CAAC,cACxEP,IAAA,MAAGwB,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAElB,IAAI,CAACc,KAAK,CAACc,MAAM,CAAI,CAAC,EACtD,CAAC,EACI,CAAC,EACP,CAAC,CACP,CAAC,CAET,CAEA,cAAe,CAAA9B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}